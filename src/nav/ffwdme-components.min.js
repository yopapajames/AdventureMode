/**
 * ffwdme.js - Turn by turn navigation in the browser.
 * @version v0.4.1
 * @copyright Copyright (c) 2011-2015 Christian BÃ¤uerlein, Silvia Hundegger; 2012-2015 flinc GmbH
 * @license MIT
 */
!function t(e,i,o){function n(a,r){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[a]={exports:{}};e[a][0].call(u.exports,function(t){var i=e[a][1][t];return n(i?i:t)},u,u.exports,t,e,i,o)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<o.length;a++)n(o[a]);return n}({1:[function(t,e,i){var o=t("../base_icon"),n=o.extend({icon:"arrival_time/clock.svg",defaultUnit:"Uhr",format:function(t){var e=t.getMinutes();return[t.getHours(),e>10?e:"0"+e].join(":")},navigationOnRoute:function(t){var e=t.navInfo.timeToDestination;if(e){var i=(new Date).valueOf(),o=new Date(i+1e3*e);this.label(this.format(o))}}});e.exports=n},{"../base_icon":8}],2:[function(t,e,i){var o=t("../base"),n=o.extend({constructor:function(t){this.base(t),this.turnTypeIconPaths={C:"arrow/straight.svg",TL:"arrow/left.svg",TSLL:"arrow/half-left.svg",TSHL:"arrow/hard-left.svg",TR:"arrow/right.svg",TSLR:"arrow/half-right.svg",TSHR:"arrow/hard-right.svg",EXIT1:"arrow/roundabout.svg",EXIT2:"arrow/roundabout.svg",EXIT3:"arrow/roundabout.svg",EXIT4:"arrow/roundabout.svg",EXIT5:"arrow/roundabout.svg",EXIT6:"arrow/roundabout.svg",TU:"arrow/u-turn.svg",FINISH:"arrow/flag.svg"},this.bindAll(this,"onRoute"),ffwdme.on("navigation:onroute",this.onRoute),this.render()},classes:"ffwdme-components-container ffwdme-grid-w3 ffwdme-grid-h2",turnTypeIconPaths:null,arrowEl:null,labelEl:null,lastTurn:null,imgUrl:function(){return ffwdme.defaults.imageBaseUrl},make:function(){this.base();var t=document.createElement("img");t.src=this.getRetinaImageUrl(this.imgUrl()+this.turnTypeIconPaths.C),this.arrowEl=$(t).addClass("ffwdme-components-small-arrow").appendTo($(this.el));var e=document.createElement("span");this.labelEl=$(e).addClass("ffwdme-components-label").addClass("ffwdme-components-label-roundabout").appendTo($(this.el))},onRoute:function(t){var e=null;if(t.navInfo.finalDirection===!0)e="FINISH";else{var i=t.navInfo.nextDirection;if(!i)return;if(e=i.turnType,!e)return;/^EXIT/.test(e)?this.labelEl.html(e.split("EXIT")[1]):this.labelEl.html("")}this.updateIcon(e)},updateIcon:function(t){t!=this.lastTurn&&(this.arrowEl[0].src=this.getRetinaImageUrl(this.imgUrl()+this.turnTypeIconPaths[t]),this.lastTurn=t)}});e.exports=n},{"../base":7}],3:[function(t,e,i){var o=t("../base"),n=t("./sprites_player"),s=o.extend({constructor:function(t){this.base(t),this.bindAll(this,"navigationOnRoute","onGeopositionUpdate","toggleSound"),this.player=new n,this.bootstrapAudioData=t.bootstrapAudioData,ffwdme.on("navigation:onroute",this.navigationOnRoute),ffwdme.on("geoposition:update",this.onGeopositionUpdate),this.render()},lastAction:"",player:null,bootstrapAudioData:null,iconSoundOff:"audio_instructions/sound-off.svg",icon:"audio_instructions/sound-off.svg",iconSoundOn:"audio_instructions/sound-on.svg",classes:"ffwdme-components-container ffwdme-grid-w2 ffwdme-grid-h1",logoEl:null,forwardMeters:50,navigationOnRoute:function(t){var e=t.navInfo.distanceToDestination,i=t.navInfo.distanceToNextDirection,o=t.navInfo.nextDirection;if(e&&e<this.forwardMeters&&n!=this.lastAction)return this.player.play("FINISH"),void(this.lastAction=n);if(i&&o){var n=this.audioAction(i,o.turnType);n.length&&n!=this.lastAction&&(this.player.play(n),this.lastAction=n)}},onGeopositionUpdate:function(t){var e=t.geoposition.coords.speed;this.forwardMeters=this.forwardMetersBySpeed(e)},forwardMetersBySpeed:function(t){if(0===t)return 40;var e=20;return e=t<11?4*t:t<22?5*t:6*t,e<25?25:e},audioAction:function(t,e){var i="",o=this.forwardMeters/4;return"TU"==e?e:/^EXIT/.test(e)&&t>500?"":/^EXIT/.test(e)?e:t>1200-o&&t<1e4+this.forwardMeters?"C":t>1e4?"C_LONG":(t>1e3-o&&t<1e3+this.forwardMeters?i="_1000":t>500-o&&t<500+this.forwardMeters?i="_500":t>100-o&&t<100+this.forwardMeters?i="_100":t>0&&t<10+this.forwardMeters&&"C"!=e&&(i="_now"),i.length?e+i:"")},imgUrl:function(){return this.getRetinaImageUrl(ffwdme.defaults.imageBaseUrl+this.icon)},iconEl:null,setIcon:function(){if(!this.iconEl){var t=document.createElement("img");this.iconEl=$(t).addClass("ffwdme-components-audio-instructions").appendTo($(this.el))}this.iconEl[0].src=this.imgUrl()},toggleSound:function(t){this.bootstrapAudioData&&(this.player.toggleEnabled()?(this.icon=this.iconSoundOn,this.player.setSprite(this.bootstrapAudioData.file,this.bootstrapAudioData.meta_data),this.player.play("INIT")):this.icon=this.iconSoundOff,this.player.canPlayAudio||(this.icon=this.iconSoundOff,console.info("Browser does not support audio instructions"),ffwdme.trigger("audio:error",{player:this.player})),this.setIcon())},make:function(){this.base();var t=this;return $(this.el).click(function(e){e.stopPropagation(),t.toggleSound()}),this.setIcon(),this}});e.exports=s},{"../base":7,"./sprites_player":4}],4:[function(t,e,i){var o=function(t){this.options=t||{},this.audioEl=document.createElement("audio"),this.srcLoaded=!1,this.canPlayAudio=""!==this.fileType(),this.enabled=!1,this.audioEl.addEventListener("canplaythrough",this.srcReady.bind(this),!1),this.audioEl.addEventListener("timeupdate",this.checkProgress.bind(this),!1)};o.prototype.options=null,o.prototype.audioEl=null,o.prototype.loggerEl=null,o.prototype.sprite=null,o.prototype.spriteMetaData=null,o.prototype.currentSprite=null,o.prototype.srcLoaded=null,o.prototype.canPlayAudio=null,o.prototype.srcReady=function(){this.srcLoaded||(this.srcLoaded=!0,this.playWhenReady&&(this.audioEl.currentTime=this.currentSprite.start,this.audioEl.play()))},o.prototype.checkProgress=function(){if(this.currentSprite){var t=this.currentSprite.start+this.currentSprite.length;this.audioEl.currentTime>=t&&this.audioEl.pause()}},o.prototype.play=function(t){if(!this.enabled)return!1;if(!this.canPlayAudio)return!1;if(!this.spriteMetaData)return!1;if(this.currentSprite=this.spriteMetaData[t],!this.currentSprite)return!1;if(!this.audioEl.src.length){var e=this.sprite+this.fileType();return this.audioEl.src=e,this.audioEl.load(),this.playWhenReady=!0,!0}return this.srcLoaded&&(this.audioEl.pause(),this.audioEl.currentTime=this.currentSprite.start,this.audioEl.play()),!0},o.prototype.fileType=function(){return this.audioEl.canPlayType("audio/mp3")?".mp3":this.audioEl.canPlayType("audio/m4a")?".m4a":this.audioEl.canPlayType("audio/ogg")?".ogg":this.audioEl.canPlayType("audio/wav")?".wav":""},o.prototype.toggleEnabled=function(){return""!==this.fileType()&&(this.enabled=!this.enabled,this.enabled||this.audioEl.pause()),this.enabled},o.prototype.setSprite=function(t,e){this.sprite=t,this.spriteMetaData=e},e.exports=o},{}],5:[function(t,e,i){var o=t("../base"),n=o.extend({constructor:function(t){this.base(t),this.lastPositions=[],this.bindAll(this,"onRoute","offRoute","start","success","error","cachePositions"),ffwdme.on("reroutecalculation:start",this.start),ffwdme.on("reroutecalculation:success",this.success),ffwdme.on("reroutecalculation:error",this.error),ffwdme.on("navigation:onroute",this.onRoute),ffwdme.on("navigation:offroute",this.offRoute),ffwdme.on("geoposition:update",this.cachePositions),this.render()},classes:"ffwdme-components-container ffwdme-components-statusbar",offRouteCounter:0,lastPositions:null,isRerouting:!1,hideTimeout:null,status:{off:{message:"You're off the route",css:"red"},start:{message:"Recalculating route...",css:"yellow"},success:{message:"Recalculation finished",css:"green"}},cachePositions:function(t){this.lastPositions=this.lastPositions.splice(-5),this.lastPositions.push(t.point)},show:function(){this.hideTimeout&&clearTimeout(this.hideTimeout),$(this.el).show()},hide:function(t){var e=$(this.el);this.hideTimeout=setTimeout(function(){e.removeClass("green").removeClass("yellow").removeClass("red").hide()},3e3)},onRoute:function(){$(this.el).hide()},offRoute:function(){this.offRouteCounter++;var t=this.status.off;$(this.el).addClass(t.css).text(t.message).show(),this.offRouteCounter<=15||this.isRerouting||(this.lastPositions.length?(ffwdme.navigation.reroute({anchorPoint:this.lastPositions[0]}),this.lastPositions=[]):ffwdme.navigation.reroute())},start:function(){this.isRerouting=!0;var t=this.status.start;$(this.el).addClass(t.css).text(t.message).show()},success:function(){this.isRerouting=!1,this.offRouteCounter=0;var t=this.status.success;$(this.el).addClass(t.css).text(t.message).show().hide()},error:function(){}});e.exports=n},{"../base":7}],6:[function(t,e,i){var o=t("../base"),n=o.extend({constructor:function(t){this.base(t),this.bindAll(this,"onGeopositionUpdate"),ffwdme.on("geoposition:update",this.onGeopositionUpdate)},attrAccessible:["map"],cachedZoomLevel:null,cachedZoomCount:0,zoomLevelBySpeed:function(t){return t<11?17:t<22?15:13},onGeopositionUpdate:function(t){if(this.map.canControlMap(this)){var e=t.geoposition.coords.speed,i=this.zoomLevelBySpeed(e);return this.cachedZoomLevel!=i?(this.cachedZoomLevel=i,void(this.cachedZoomCount=0)):this.cachedZoomCount<2?this.cachedZoomCount++:void this.map.setZoom(i)}}});e.exports=n},{"../base":7}],7:[function(t,e,i){var o=ffwdme.Class.extend({constructor:function(t){this.options=t||{},this.setAccessibleAttributes(),this.onResize&&(this.bindAll(this,"onResize"),$(window).bind("resize",this.onResize)),this.onOrientationChange&&(this.bindAll(this,"onOrientationChange"),$(window).bind("orientationchange",this.onOrientationChange)),ffwdme.components.Base.testElement||(this.createTestElement(),$(window).bind("orientationchange",ffwdme.components.Base.updateOrientationClass),window.setTimeout(ffwdme.components.Base.updateOrientationClass,200))},classes:null,grid:null,$:function(t){return $(t,this.el)},attrAccessible:["el","grid"],setAccessibleAttributes:function(){for(var t,e=this.attrAccessible,i=-1,o=e.length;t=e[++i],i<o;)"undefined"!=typeof this.options[t]&&(this[t]=this.options[t])},make:function(){return this.el=document.createElement("div"),this.options.css&&$(this.el).css(this.options.css),$(this.el).addClass(this.classes),this.setPosition(),this},setPosition:function(){var t=this.grid;if(t){var e=$(this.el);t.x&&e.addClass("ffwdme-grid-x"+t.x),t.y&&e.addClass("ffwdme-grid-y"+t.y)}},createTestElement:function(){ffwdme.components.Base.testElement=$(document.createElement("div")).addClass("ffwdme-components-test-size ffwdme-components-container ffwdme-grid-h1").appendTo($(".ffwdme-components-wrapper"));var t=null,e=function(){var e=ffwdme.components.Base.testElement,i=parseInt(e.height(),10);t!=i&&$(".ffwdme-components-container").not(e).css({fontSize:i+"px",lineHeight:i+"px"}),t=i};$(window).bind("resize",e),window.setTimeout(e,200)},render:function(){return this.el||this.make(),$(this.options.parent).append(this.el),this},getRetinaImageUrl:function(t){return document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect?t:t.replace("svg","png")}},{testElement:null,updateOrientationClass:function(){var t=ffwdme.components.Base.determineOrientationClass();$(".ffwdme-components-container").removeClass("landscape portrait").addClass(t)},determineOrientationClass:function(){var t;return"undefined"==typeof window.orientation?t="portrait":0===window.orientation||180===window.orientation?t="portrait":90!==window.orientation&&window.orientation!==-90||(t="landscape"),t}});e.exports=o},{}],8:[function(t,e,i){var o=t("../base"),n=o.extend({constructor:function(t){this.base(t),this.navigationOnRoute&&(this.bindAll(this,"navigationOnRoute"),ffwdme.on("navigation:onroute",this.navigationOnRoute)),this.render()},iconSrc:function(){return this.getRetinaImageUrl(ffwdme.defaults.imageBaseUrl+this.icon)},icon:null,defaultUnit:null,classes:"ffwdme-grid-w3 ffwdme-grid-h1 ffwdme-components-icon",accessor:function(t,e){var i=this.$(t);return"undefined"==typeof e?i.html():(i.html(e),i)},label:function(t){return this.accessor(".ffwdme-components-label",t)},unit:function(t){return this.accessor(".ffwdme-components-label-unit",t)},make:function(){this.base();var t=['<span class="ffwdme-components-icon-container"><img class="ffwdme-components-icon-img" src="',this.iconSrc(),'" /></span>','<span class="ffwdme-components-label">-</span>','<span class="ffwdme-components-label-unit"> ',this.defaultUnit,"</span>"].join("");return $(this.el).addClass("ffwdme-components-container").html(t),this}});e.exports=n},{"../base":7}],9:[function(t,e,i){var o=t("../base"),n=o.extend({constructor:function(t){this.base(t),this.navigationOnRoute&&(this.bindAll(this,"navigationOnRoute"),ffwdme.on("navigation:onroute",this.navigationOnRoute)),this.render()},make:function(){return this.base(),$(this.el).addClass("ffwdme-components-container").html('<span class="ffwdme-components-text"></span>'),this},classes:null});e.exports=n},{"../base":7}],10:[function(t,e,i){var o=t("../base_icon"),n=o.extend({icon:"distance_to_destination/road.svg",defaultUnit:"km",format:function(t){var e=" m";return t>1e3?(t=(t/1e3).toFixed(1),e=" km"):t=t>500?1e3*(t/1e3).toFixed(1):1e3*(t/1e3).toFixed(2),{distance:t,unit:e}},navigationOnRoute:function(t){var e=t.navInfo.distanceToDestination;if(e){var i=this.format(e);this.label(i.distance),this.unit(i.unit)}}});e.exports=n},{"../base_icon":8}],11:[function(t,e,i){var o=t("../base_wide"),n=t("../distance_to_destination"),s=o.extend({classes:"ffwdme-components-container ffwdme-grid-w9 ffwdme-grid-h1 ffwdme-components-text-only ffwdme-components-big-typo",format:n.prototype.format,navigationOnRoute:function(t){var e=t.navInfo.distanceToNextDirection;if(e){var i=this.format(e);$(this.el).find(".ffwdme-components-text").html([i.distance,i.unit].join(" "))}}});e.exports=s},{"../base_wide":9,"../distance_to_destination":10}],12:[function(t,e,i){var o=t("./base"),n=t("./arrow"),s=t("./arrival_time"),a=t("./audio_instructions"),r=t("./auto_reroute"),l=t("./auto_zoom"),c=t("./distance_to_destination"),u=t("./distance_to_next_turn"),h=t("./leaflet"),d=t("./map_rotator"),f=t("./next_street"),p=t("./route_overview"),m=t("./speed"),w=t("./zoom"),g=t("./time_to_destination");!function(t){t.components={Base:o,ArrivalTime:s,Arrow:n,AudioInstructions:a,AutoReroute:r,AutoZoom:l,DistanceToDestination:c,DistanceToNextTurn:u,Leaflet:h,MapRotator:d,NextStreet:f,RouteOverview:p,Speed:m,TimeToDestination:g,Zoom:w}}(ffwdme)},{"./arrival_time":1,"./arrow":2,"./audio_instructions":3,"./auto_reroute":5,"./auto_zoom":6,"./base":7,"./distance_to_destination":10,"./distance_to_next_turn":11,"./leaflet":13,"./map_rotator":14,"./next_street":15,"./route_overview":16,"./speed":17,"./time_to_destination":18,"./zoom":19}],13:[function(t,e,i){var o=t("../base"),n=o.extend({constructor:function(t){this.base(t),this.bindAll(this,"resize","drawRoute","drawMarkerWithoutRoute","onRouteSuccess","navigationOnRoute","navigationOffRoute","rotateMarker","setupMap"),n.defineLeafletExtensions(),this.mapReadyCallbacks=[],this.setupMap(),ffwdme.on("geoposition:update",this.drawMarkerWithoutRoute),ffwdme.on("routecalculation:success",this.onRouteSuccess),ffwdme.on("routecalculation:success",this.drawRoute),ffwdme.on("reroutecalculation:success",this.drawRoute)},attrAccessible:["el","apiKey"],map:null,polylines:null,helpLine:null,marker:null,markerIcon:null,zoomLevel:17,inRoutingMode:!1,inRouteOverview:!1,mapReady:!1,mapReadyCallbacks:null,userZoom:0,canControlMap:function(t){return!(t instanceof ffwdme.components.AutoZoom&&this.inRouteOverview)&&!(t instanceof ffwdme.components.MapRotator&&this.inRouteOverview)},setupEventsOnMapReady:function(){ffwdme.on("navigation:onroute",this.navigationOnRoute),ffwdme.on("navigation:offroute",this.navigationOffRoute),ffwdme.on("geoposition:update",this.rotateMarker)},setupMap:function(){new L.LatLng(this.options.center.lat,this.options.center.lng);this.map=new L.Map(this.el.attr("id"),{attributionControl:!1,zoomControl:!1}),L.tileLayer(this.options.tileURL,{minZoom:10,maxZoom:18}).addTo(this.map),this.options.disableLeafletLocate||this.map.locate({setView:!0,maxZoom:17}),this.setupEventsOnMapReady();for(var t=0;t<this.mapReadyCallbacks.length;t++)this.mapReadyCallbacks[t]();this.mapReadyCallbacks=[],this.mapReady=!0},hideMarker:function(){this.marker&&$(this.marker._icon).hide()},rotateMarker:function(t){var e=t.geoposition.coords.heading;!isNaN(e)&&null!==e&&this.marker&&this.marker.setIconAngle(e)},drawMarkerWithoutRoute:function(t){if(!this.inRoutingMode){var e;this.marker?this.drawMarkerOnMap(t.point.lat,t.point.lng,!0):(e=new L.Icon({iconUrl:ffwdme.defaults.imageBaseUrl+"leaflet/map_marker.png",shadowUrl:ffwdme.defaults.imageBaseUrl+"leaflet/map_marker_shadow.png",iconSize:new L.Point(40,40),shadowSize:new L.Point(40,40),iconAnchor:new L.Point(20,20),popupAnchor:new L.Point((-3),(-76))}),this.marker=new L.Compass(t.point,{icon:e}),this.disableMarker||this.map.addLayer(this.marker))}},drawRoute:function(t){if(!this.mapReady){var e=this;return void this.mapReadyCallbacks.push(function(){e.removeHelpLine(),e.drawPolylineOnMap(t.route,!1)})}this.removeHelpLine(),this.drawPolylineOnMap(t.route,!1)},onRouteSuccess:function(t){this.inRoutingMode=!0;var e=t.route.destination(),i=new L.Icon({iconUrl:ffwdme.defaults.imageBaseUrl+"leaflet/map_marker_finish.png",shadowUrl:ffwdme.defaults.imageBaseUrl+"leaflet/map_marker_shadow.png",iconSize:new L.Point(32,32),shadowSize:new L.Point(32,32),iconAnchor:new L.Point(16,32),popupAnchor:new L.Point((-3),(-76))});this.finishMarker=new L.Marker(e,{icon:i}),this.map.addLayer(this.finishMarker)},navigationOnRoute:function(t){var e=t.navInfo.position;this.removeHelpLine(),this.drawMarkerOnMap(e.lat,e.lng,!0)},navigationOffRoute:function(t){var e=t.navInfo.positionRaw;this.drawMarkerOnMap(e.lat,e.lng,!0),this.drawHelpLine(t.navInfo.positionRaw,t.navInfo.position)},drawPolylineOnMap:function(t,e){for(var i,o,n=t.directions,s=n.length,a=[],r=0;r<s;r++)if(n[r].path){o=n[r].path,i=o.length;for(var l=0;l<i;l++)a.push(new L.LatLng(o[l].lat,o[l].lng))}this.polylines?(this.polylines.underlay.setLatLngs(a),this.polylines.overlay.setLatLngs(a)):(this.polylines={},this.polylines.underlay=new L.Polyline(a,{color:"red",opacity:1,weight:8}),this.polylines.overlay=new L.Polyline(a,{color:"white",opacity:1,weight:4}),this.map.addLayer(this.polylines.underlay),this.map.addLayer(this.polylines.overlay)),e&&!this.inRouteOverview&&this.map.fitBounds(new L.LatLngBounds(a))},drawMarkerOnMap:function(t,e,i){var o=new L.LatLng(t,e);this.marker.setLatLng(o),i&&!this.inRouteOverview?this.map.setView(o,this.getZoom()):this.map.fitBounds(this.polylines.overlay.getBounds())},removeHelpLine:function(){this.helpLine&&this.map.removeLayer(this.helpLine)},drawHelpLine:function(t,e){var i=[new L.LatLng(t.lat,t.lng),new L.LatLng(e.lat,e.lng)];this.helpLine?(this.helpLine.setLatLngs(i),this.map.addLayer(this.helpLine)):(this.helpLine=new L.Polyline(i,{color:"red",opacity:.5,weight:2}),this.map.addLayer(this.helpLine))},changeUserZoom:function(t){this.userZoom+=t},getZoom:function(){return this.zoomLevel+this.userZoom},setZoom:function(t){return this.zoomLevel=t,this.zoomLevel},setMapContainerSize:function(t,e,i,o,n){this.el&&(this.el[0].style.transform="rotate("+n+"deg"),this.el.css({width:t+"px",height:e+"px",top:i,left:o}),this.map&&this.map._onResize()},toggleRouteOverview:function(){return this.inRouteOverview=!this.inRouteOverview,this.inRouteOverview&&this.setMapContainerSize($(window).width(),$(window).height(),0,0,0),this.inRouteOverview}},{defineLeafletExtensions:function(){L.Compass=L.Marker.extend({setIconAngle:function(t){this.options.iconAngle=t,this.update()},_setPos:function(t){L.Marker.prototype._setPos.call(this,t);var e=this.options.iconAngle;e&&(this._icon.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(t)+" rotate("+e+"deg)")}})}});e.exports=n},{"../base":7}],14:[function(t,e,i){var o=t("../base"),n=o.extend({constructor:function(t){this.base(t),this.bindAll(this,"rotateMap","setupRotation"),$(window).on("resize",this.setupRotation),ffwdme.on("geoposition:update",this.rotateMap),this.setupRotation()},attrAccessible:["map"],last_heading:0,rotating:!1,setupRotation:function(){if(this.map.canControlMap(this)){var t=Math.ceil(Math.sqrt(Math.pow($(window).width(),2)+Math.pow($(window).height(),2)));this.map.setMapContainerSize(t,t,($(window).height()-t)/2,($(window).width()-t)/2,0)}},rotateMap:function(t){if(!this.map.canControlMap(this))return void(this.rotating=!1);this.rotating===!1&&(this.setupRotation(),this.rotating=!0);var e=-t.geoposition.coords.heading;if(!isNaN(e)&&null!==e){var i=e-this.last_heading;i>180?e-=360:i<-180&&(e+=360),this.last_heading=e,this.map.el&&(this.map.el[0].style.transform="rotate("+e+"deg)")}}});e.exports=n},{"../base":7}],15:[function(t,e,i){var o=t("../base_wide"),n=o.extend({classes:"ffwdme-components-container ffwdme-components-text-only ffwdme-grid-w9 ffwdme-grid-h1",showNextStreet:function(t){$(this.el).find(".ffwdme-components-text").html(t.navInfo.nextDirection.street).css("background","")},showFinalStreet:function(t){$(this.el).find(".ffwdme-components-text").html(t.navInfo.currentDirection.street)},navigationOnRoute:function(t){t.navInfo.finalDirection===!0?this.showFinalStreet(t):t.navInfo.nextDirection&&t.navInfo.nextDirection.street&&this.showNextStreet(t)}});e.exports=n},{"../base_wide":9}],16:[function(t,e,i){var o=t("../base"),n=o.extend({constructor:function(t){this.base(t),this.render()},attrAccessible:["map","grid"],iconEl:null,icon:"route_overview/map.svg",iconPosition:"route_overview/position.svg",iconRouteOverview:"route_overview/map.svg",classes:"ffwdme-components-container ffwdme-grid-w2 ffwdme-grid-h1 ffwdme-components-route-overview",toggleOverview:function(t){this.map&&this.map.canControlMap(this)&&(this.icon=this.map.toggleRouteOverview()?this.iconPosition:this.iconRouteOverview,this.setIcon(),this.setOpacity())},imgUrl:function(){return this.getRetinaImageUrl(ffwdme.defaults.imageBaseUrl+this.icon)},setOpacity:function(){var t=$(".ffwdme-components-container");this.map.inRouteOverview?t.addClass("ffwdme-in-route-overview"):t.removeClass("ffwdme-in-route-overview")},setIcon:function(){if(!this.iconEl){var t=document.createElement("img");this.iconEl=$(t).addClass("ffwdme-components-route-overview-image").appendTo($(this.el))}this.iconEl[0].src=this.imgUrl()},make:function(){this.base();var t=this;return $(this.el).click(function(e){e.stopPropagation(),t.toggleOverview()}),this.setIcon(),this}});e.exports=n},{"../base":7}],17:[function(t,e,i){var o=t("../base_icon"),n=o.extend({icon:"speed/car.svg",defaultUnit:"km/h",format:function(t){return Math.round(3.6*t)},navigationOnRoute:function(t){var e=t.navInfo.raw.geoposition.coords.speed;e&&this.label(this.format(e))}});e.exports=n},{"../base_icon":8}],18:[function(t,e,i){var o=t("../base_icon"),n=o.extend({icon:"time_to_destination/flag.svg",defaultUnit:"h",format:function(t){var e=Math.round(t/60),i=e%60,o=(e-i)/60;return i=i<10?"0"+i:i,[o,":",i].join("")},navigationOnRoute:function(t){var e=t.navInfo.timeToDestination;e&&this.label(this.format(e))}});e.exports=n},{"../base_icon":8}],19:[function(t,e,i){var o=t("../base"),n=o.extend({constructor:function(t){this.base(t),this.render()},attrAccessible:["map","grid"],iconElZoomIn:null,iconElZoomOut:null,iconZoomIn:"zoom/plus.svg",iconZoomOut:"zoom/minus.svg",classes:"ffwdme-components-container ffwdme-components-zoom-container ffwdme-grid-w3 ffwdme-grid-h1",imgUrl:function(t){return this.getRetinaImageUrl(ffwdme.defaults.imageBaseUrl+t)},zoom:function(t){this.map&&this.map.changeUserZoom(t),ffwdme.geolocation.last&&ffwdme.trigger("geoposition:update",ffwdme.geolocation.last)},setIcons:function(){var t;this.iconElZoomIn||(t=document.createElement("img"),this.iconElZoomIn=$(t).addClass("ffwdme-components-zoom").appendTo($(this.el))),this.iconElZoomIn[0].src=this.imgUrl(this.iconZoomIn),this.iconElZoomOut||(t=document.createElement("img"),this.iconElZoomOut=$(t).addClass("ffwdme-components-zoom").appendTo($(this.el))),this.iconElZoomOut[0].src=this.imgUrl(this.iconZoomOut)},make:function(){this.base();var t=this;return this.setIcons(),$(this.iconElZoomIn).click(function(e){e.stopPropagation(),t.zoom(1)}),$(this.iconElZoomOut).click(function(e){e.stopPropagation(),t.zoom(-1)}),this}});e.exports=n},{"../base":7}]},{},[12]);